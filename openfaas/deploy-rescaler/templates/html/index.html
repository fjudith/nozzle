
<!DOCTYPE html><html lang="fr">
  <head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1" />
  <head><title>rescaler: ${host}</title></head>
  <body>
  <h1>${host}</h1>
  <form id="rescaler" >
  <label for="namespace">Namespace</label>
  <input id="namespace" name="namespace" value="${namespace}">
  <label for="name">Ingress name</label>
  <input id="name" name="ingress" value="${name}">
  </p>
  Click the <b>Rescale</b> button to restore <code>Deployment</code> and/or <code>Statefulset</code> replicas</p>
  <input type="submit" value="Rescale" />
  </form>
  </body>
  <script>
  "use strict";
  window.addEventListener( "load", function () {
  function sendData() {
      var path  = "/function/rescale-replicas.openfaas-fn"
  
      const XHR = new XMLHttpRequest();
  
      // Bind the FormData object and the form element
      const FD = new FormData( form );
  
      // Define what happens on successful data submission
      XHR.addEventListener( "load", function(event) {
      alert( event.target.responseText );
      } );
  
      // Define what happens in case of error
      XHR.addEventListener( "error", function( event ) {
      alert( "Oops! Something went wrong." );
      } );
  
      // Set up our request
      XHR.open( "POST", path );
  
      XHR.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
      var json = {};
      for (const [key, value]  of FD.entries()) {
             json[key] = value;
      }
      var json = JSON.stringify(json);
      console.info(json);
  
      // The data sent is what the user provided in the form
      XHR.send( json );
  }
  
  // Access the form element...
  var form = document.getElementById( "rescaler" );
  
  // ...and take over its submit event.
  form.addEventListener( "submit", function ( event ) {
      event.preventDefault();
  
      sendData();
  } );
  } );
  </script>
  </html>